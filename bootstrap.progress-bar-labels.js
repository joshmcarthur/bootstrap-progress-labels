// Generated by CoffeeScript 1.10.0
(function() {
  var $;

  $ = jQuery;

  $.fn.progressBarLabels = function() {
    return this.each(function() {
      var container, i, index, label, label_append, maximum, minimum, multiplier, progress, ref, step, vertical_rule;
      progress = $(this);
      maximum = progress.data('label-max');
      step = progress.data('label-step');
      minimum = progress.data('label-min') || 0;
      label_append = progress.data('label-append') || "";
      if (!(maximum && step)) {
        return;
      }
      if (!progress.hasClass('progress')) {
        return;
      }
      container = $('<div></div>');
      container.addClass('label-group');
      container.width("100%");
      for (index = i = 0, ref = (maximum - minimum) / step; 0 <= ref ? i <= ref : i >= ref; index = 0 <= ref ? ++i : --i) {
        multiplier = container.width() / (maximum - minimum);
        label = $("<label></label>");
        label.css({
          "left": (index * (step * multiplier)) + "%",
          "width": (step * multiplier) + "%",
          "display": "block",
          "text-align": "center",
          "position": "absolute",
          "margin-left": "-" + ((step * multiplier) / 2) + "%"
        });
        label.html(((index * step) + minimum) + label_append);
        vertical_rule = $('<div></div>');
        vertical_rule.css({
          "position": "absolute",
          "left": "50%",
          "top": "-" + (progress.height() / 4) + "px",
          "height": "" + (progress.height() / 2),
          "border-left": "solid 2px #666666"
        });
        if (index === 0) {
          vertical_rule.css({
            "border-left": "none"
          });
        }
        if (index === ((maximum - minimum) / step)) {
          vertical_rule.css({
            "border-left": "none"
          });
        }
        label.prepend(vertical_rule);
        container.append(label);
      }
      progress.append(container);
      progress.css({
        "position": "relative",
        "overflow": "visible"
      });
      return container.css({
        "top": progress.height(),
        "position": "absolute"
      });
    });
  };

  $(function() {
    return $('.progress-labelled').progressBarLabels();
  });

}).call(this);
